<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Random Password Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    /* Theme variables */
    :root {
      --bg-color: #ffffff;
      --text-color: #0f172a;
      --card-bg: #f8f9fa;
      --muted: #6c757d;
    }
    .dark-mode {
      --bg-color: #121212;
      --text-color: #f8fafc;
      --card-bg: #1e1e1e;
      --muted: #9aa1a9;
    }

    /* Base styling */
    body { background: var(--bg-color); color: var(--text-color); transition: background .25s, color .25s; }
    .card { background: var(--card-bg); color: var(--text-color); border-radius: 14px; box-shadow: 0 8px 24px rgba(0,0,0,.08); }
    .list-group-item, input, textarea { background: var(--card-bg); color: var(--text-color); border-color: rgba(0,0,0,.15); }
    .text-muted { color: var(--muted) !important; }

 .list-group {
      max-height: 261px;
      overflow-y: auto;
    }

    /* Strength colors */
    .strength { font-weight: 700; }
    .strength.weak { color: #ef4444; }
    .strength.medium { color: #f59e0b; }
    .strength.strong { color: #22c55e; }

    /* Small niceties */
    .btn-icon { width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; border-radius: 50%; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
  </style>
</head>
<body class="p-3 p-md-4">
  <div class="container" style="max-width: 760px;">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="m-0 d-flex align-items-center gap-2"><span class="me-2">ðŸ”‘</span> Random Password Generator</h2>
      <button class="btn btn-outline-secondary btn-icon" id="toggleDarkMode" title="Toggle theme">ðŸŒ™</button>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="tabMenu">
      <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#generator">Generator</button></li>
      <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#history">History</button></li>
    </ul>

    <div class="tab-content mt-3">
      <!-- Generator Tab -->
      <div class="tab-pane fade show active" id="generator">
        <div class="card p-3 p-md-4">
          <div class="row g-3 align-items-center mb-1">
            <div class="col-sm-6 d-flex align-items-center">
              <label for="length" class="form-label me-2 mb-0">Password Length</label>
              <input type="number" id="length" class="form-control w-auto" min="4" max="64" value="12" />
            </div>
          </div>

          <div class="row g-3">
            <div class="col-sm-6">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="uppercase" checked />
                <label class="form-check-label" for="uppercase">Include Uppercase</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="lowercase" checked />
                <label class="form-check-label" for="lowercase">Include Lowercase</label>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="numbers" checked />
                <label class="form-check-label" for="numbers">Include Numbers</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="symbols" />
                <label class="form-check-label" for="symbols">Include Symbols</label>
              </div>
            </div>
          </div>

          <button class="btn btn-primary w-100 mt-3" id="generateBtn">Generate Password</button>

          <div class="d-flex align-items-center mt-3">
            <textarea id="passwordOutput" class="form-control me-2 mono" rows="1" readonly></textarea>
            <button id="copyBtn" class="btn btn-success" style="display:none;">Copy</button>
          </div>
          <div id="copyMsg" class="text-success small mt-1"></div>
          <div id="strength" class="mt-2 strength"></div>
        </div>
      </div>

      <!-- History Tab -->
      <div class="tab-pane fade" id="history">
        <div class="card p-3 p-md-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="m-0 d-flex align-items-center gap-2"><span>ðŸ“œ</span> Generated History</h5>
            <div class="d-flex gap-2 flex-wrap">
              <button class="btn btn-sm btn-secondary" id="exportCsv">Export CSV</button>
              <button class="btn btn-sm btn-secondary" id="exportTxt">Export TXT</button>
              <button class="btn btn-sm btn-danger" id="clearHistory">Clear All</button>
            </div>
          </div>
          <ul class="list-group" id="historyList" >
            <li class="list-group-item text-muted">No password available</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Elements
    const output = document.getElementById('passwordOutput');
    const copyBtn = document.getElementById('copyBtn');
    const copyMsg = document.getElementById('copyMsg');
    const strengthText = document.getElementById('strength');
    const historyList = document.getElementById('historyList');

    let history = JSON.parse(localStorage.getItem('passwordHistory') || '[]');

    function generatePassword(length, upper, lower, number, symbol) {
      let chars = '';
      if (upper) chars += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      if (lower) chars += 'abcdefghijklmnopqrstuvwxyz';
      if (number) chars += '0123456789';
      if (symbol) chars += "!@#$%^&*()_+[]{}|;:,.<>?";
      if (!chars) { alert('Please check at least one option!'); return ''; }
      let pwd = '';
      for (let i = 0; i < length; i++) pwd += chars[Math.floor(Math.random() * chars.length)];
      return pwd;
    }

    function evaluateStrength(pwd) {
      let score = 0;
      if (pwd.length >= 8) score++;
      if (/[A-Z]/.test(pwd)) score++;
      if (/[0-9]/.test(pwd)) score++;
      if (/[^A-Za-z0-9]/.test(pwd)) score++;
      if (score <= 1) { strengthText.textContent = 'Weak'; strengthText.className = 'strength weak'; }
      else if (score === 2) { strengthText.textContent = 'Medium'; strengthText.className = 'strength medium'; }
      else { strengthText.textContent = 'Strong'; strengthText.className = 'strength strong'; }
    }

    function renderHistory() {
      historyList.innerHTML = '';
      if (history.length === 0) {
        historyList.innerHTML = '<li class="list-group-item text-muted">No password available</li>';
        return;
      }
      history.forEach((item, index) => {
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `<div class="text-start text-break"><div class="mono">${item.password}</div><small class="text-muted">${item.date}</small></div>
                        <div class="d-flex gap-2">
                          <button class="btn btn-sm btn-outline-success" data-index="${index}" data-action="copy">Copy</button>
                          <button class="btn btn-sm btn-outline-danger" data-index="${index}" data-action="remove">Remove</button>
                        </div>`;
        historyList.appendChild(li);
      });
    }

    function addToHistory(password) {
      const date = new Date().toLocaleString();
      history.unshift({ password, date });
      localStorage.setItem('passwordHistory', JSON.stringify(history));
      renderHistory();
    }

    // Event: Generate
    document.getElementById('generateBtn').addEventListener('click', () => {
      const length = +document.getElementById('length').value;
      const upper = document.getElementById('uppercase').checked;
      const lower = document.getElementById('lowercase').checked;
      const number = document.getElementById('numbers').checked;
      const symbol = document.getElementById('symbols').checked;
      const pwd = generatePassword(length, upper, lower, number, symbol);
      if (!pwd) return;
      output.value = pwd;
      copyBtn.style.display = 'inline-block';
      evaluateStrength(pwd);
      addToHistory(pwd);
    });

    // Event: Copy current
    copyBtn.addEventListener('click', () => {
      if (!output.value) return;
      navigator.clipboard.writeText(output.value).then(() => {
        copyMsg.textContent = 'Password copied successfully';
        setTimeout(() => copyMsg.textContent = '', 1800);
      });
    });

    // Event: History actions (copy/remove)
    historyList.addEventListener('click', (e) => {
      const btn = e.target.closest('button');
      if (!btn) return;
      const index = +btn.dataset.index;
      const action = btn.dataset.action;
      if (action === 'copy') {
        navigator.clipboard.writeText(history[index].password);
      } else if (action === 'remove') {
        history.splice(index, 1);
        localStorage.setItem('passwordHistory', JSON.stringify(history));
        renderHistory();
      }
    });

    // Export CSV
    document.getElementById('exportCsv').addEventListener('click', () => {
      if (!history.length) return alert('No history to export!');
      let csv = 'Password,Date\n';
      history.forEach(({password, date}) => { csv += `"${password}","${date}"\n`; });
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'password_history.csv'; a.click();
      URL.revokeObjectURL(url);
    });

    // Export TXT
    document.getElementById('exportTxt').addEventListener('click', () => {
      if (!history.length) return alert('No history to export!');
      const lines = history.map(({password, date}) => `${password} \u2014 ${date}`).join('\n');
      const blob = new Blob([lines], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'password_history.txt'; a.click();
      URL.revokeObjectURL(url);
    });

    // Clear All
    document.getElementById('clearHistory').addEventListener('click', () => {
      if (!confirm('Clear all saved passwords?')) return;
      history = [];
      localStorage.removeItem('passwordHistory');
      renderHistory();
    });

    // Theme toggle
    const themeBtn = document.getElementById('toggleDarkMode');
    function applyTheme() {
      const isDark = localStorage.getItem('darkMode') === 'true';
      document.body.classList.toggle('dark-mode', isDark);
      themeBtn.textContent = isDark ? 'ðŸŒž' : 'ðŸŒ™';
    }
    themeBtn.addEventListener('click', () => {
      const next = !(localStorage.getItem('darkMode') === 'true');
      localStorage.setItem('darkMode', next);
      applyTheme();
    });

    // Init
    applyTheme();
    renderHistory();
  </script>
</body>
</html>
